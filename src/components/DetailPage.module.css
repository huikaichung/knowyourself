.page { min-height: 100vh; position: relative; overflow-x: hidden; background: var(--bg-primary); }
.meshBg { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
.orbPurple { position: absolute; width: 500px; height: 500px; top: -10%; right: -10%; border-radius: 50%; background: radial-gradient(circle, rgba(127, 90, 240, 0.06) 0%, transparent 65%); filter: blur(80px); }

.header { position: sticky; top: 0; z-index: 20; padding: var(--space-4) var(--space-6); background: rgba(22, 22, 26, 0.85); backdrop-filter: blur(16px); border-bottom: 1px solid var(--border); }
.back { display: inline-flex; align-items: center; gap: var(--space-2); color: var(--text-body); font-size: 0.85rem; font-weight: 500; transition: color 0.2s; text-decoration: none; }
.back:hover { color: var(--text-headline); }

.main { position: relative; z-index: 1; max-width: 720px; margin: 0 auto; padding: 0 var(--space-5) var(--space-16); }

.titleBlock { padding: var(--space-10) 0 var(--space-6); text-align: center; }
.title { font-size: 1.6rem; font-weight: 700; color: var(--text-headline); margin-bottom: var(--space-2); }
.subtitle { font-size: 0.9rem; color: var(--text-muted); }
.titleBlock .loadingHint { font-size: 0.78rem; color: var(--text-muted); opacity: 0.6; margin-top: var(--space-2); }

/* Cards */
.card { background: var(--glass-bg); border: 1px solid var(--border); border-radius: var(--radius-xl); padding: var(--space-8) var(--space-6); margin-bottom: var(--space-6); animation: fadeInUp 0.5s ease both; }
.cardTitle { font-size: 1.25rem; font-weight: 700; color: var(--text-headline); margin-bottom: var(--space-6); padding-bottom: var(--space-3); border-bottom: 1px solid var(--border); }
.cardLoading { display: flex; flex-direction: column; gap: var(--space-4); padding: var(--space-4) 0; }
.loadingHeader { display: flex; align-items: center; gap: var(--space-3); color: var(--text-muted); font-size: 0.85rem; }
.loadingDot { width: 10px; height: 10px; border-radius: 50%; background: var(--accent-primary); animation: pulse-soft 1.5s ease-in-out infinite; }
.loadingHint { font-size: 0.78rem; color: var(--text-muted); opacity: 0.7; }

/* Skeleton loading */
.skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.03) 25%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.03) 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: var(--radius-sm); }
.skeletonLine { height: 14px; margin-bottom: var(--space-2); }
.skeletonLine:nth-child(1) { width: 85%; }
.skeletonLine:nth-child(2) { width: 72%; }
.skeletonLine:nth-child(3) { width: 90%; }
.skeletonLine:nth-child(4) { width: 65%; }
.skeletonPill { display: inline-block; height: 32px; width: 100px; margin-right: var(--space-2); margin-bottom: var(--space-2); border-radius: var(--radius-md); }

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.cardError { color: #F87171; font-size: 0.88rem; padding: var(--space-4) 0; }

/* Success state animation */
.cardReady { animation: cardSlideIn 0.4s ease-out both; }
@keyframes cardSlideIn {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

/* System content */
.systemContent { display: flex; flex-direction: column; gap: var(--space-6); }
.subSection { display: flex; flex-direction: column; gap: var(--space-3); }
.subSection h3 { font-size: 0.92rem; font-weight: 600; color: var(--accent-primary); letter-spacing: 0.03em; opacity: 0.85; }

/* Data pills */
.dataPill { display: inline-flex; align-items: center; gap: var(--space-2); padding: var(--space-2) var(--space-4); background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: var(--radius-md); margin-right: var(--space-2); margin-bottom: var(--space-2); }
.pillLabel { font-size: 0.78rem; color: var(--text-muted); font-weight: 500; }
.pillValue { font-size: 0.9rem; color: var(--text-headline); font-weight: 600; }

.rowPair { display: flex; flex-wrap: wrap; gap: var(--space-2); }

/* Tables */
.tableWrap { overflow-x: auto; margin: var(--space-2) 0; }
.table { width: 100%; border-collapse: collapse; font-size: 0.82rem; }
.table th { text-align: left; padding: var(--space-2) var(--space-3); color: var(--text-muted); font-weight: 500; border-bottom: 1px solid var(--border); font-size: 0.78rem; letter-spacing: 0.03em; }
.table td { padding: var(--space-2) var(--space-3); color: var(--text-body); border-bottom: 1px solid rgba(255,255,255,0.03); }
.tdBold { color: var(--text-headline); font-weight: 600; }

/* Interpretation lines */
.interpLine { font-size: 0.84rem; color: var(--text-body); line-height: 1.7; padding: var(--space-1) 0; }
.interpLine strong { color: var(--text-headline); font-weight: 500; }

/* Analysis text */
.analysis { font-size: 0.88rem; color: var(--text-body); line-height: 1.85; }

/* Para block */
.paraBlock { padding-top: var(--space-4); border-top: 1px solid var(--border); }
.paraBlock h3 { font-size: 0.85rem; font-weight: 600; color: var(--accent-primary); margin-bottom: var(--space-2); opacity: 0.85; }
.paraBlock p { font-size: 0.88rem; color: var(--text-body); line-height: 1.85; }

/* Quote block (for 卦辭/爻辭) */
.quoteBlock { font-size: 0.88rem; color: var(--text-headline); line-height: 1.8; padding: var(--space-3) var(--space-5); background: rgba(127, 90, 240, 0.05); border-left: 2px solid rgba(127, 90, 240, 0.3); border-radius: 0 var(--radius-sm) var(--radius-sm) 0; font-style: italic; }

/* === BAZI specific === */
.pillarsGrid { display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--space-3); }
.pillarCard { display: flex; flex-direction: column; align-items: center; gap: var(--space-1); padding: var(--space-4) var(--space-2); background: rgba(255,255,255,0.025); border: 1px solid var(--border); border-radius: var(--radius-md); text-align: center; }
.pillarLabel { font-size: 0.75rem; color: var(--text-muted); font-weight: 500; }
.pillarStemBranch { font-size: 1.3rem; font-weight: 700; color: var(--text-headline); letter-spacing: 0.1em; }
.pillarHidden { font-size: 0.72rem; color: var(--text-muted); }
.pillarNayin { font-size: 0.72rem; color: var(--text-muted); }

.elementsRow { display: flex; gap: var(--space-3); justify-content: center; }
.elementItem { display: flex; flex-direction: column; align-items: center; gap: var(--space-1); padding: var(--space-3) var(--space-5); background: rgba(255,255,255,0.025); border-radius: var(--radius-md); }
.elementName { font-size: 0.85rem; color: var(--text-body); font-weight: 500; }
.elementCount { font-size: 1.2rem; font-weight: 700; color: var(--accent-primary); font-family: 'Space Grotesk', monospace; }

.daYunRow { display: flex; gap: var(--space-3); padding: var(--space-3) var(--space-4); background: rgba(255,255,255,0.02); border-radius: var(--radius-md); align-items: baseline; margin-bottom: var(--space-2); }
.daYunAge { font-size: 0.8rem; color: var(--text-muted); min-width: 64px; font-weight: 500; flex-shrink: 0; }
.daYunSB { font-size: 0.92rem; color: var(--text-headline); font-weight: 600; min-width: 40px; flex-shrink: 0; }
.daYunInterp { font-size: 0.82rem; color: var(--text-body); line-height: 1.6; }

/* === ZIWEI specific === */
.palaceBlock { padding: var(--space-4); background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.04); border-radius: var(--radius-md); margin-bottom: var(--space-3); }
.palaceHeader { display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-2); }
.palaceName { font-size: 0.95rem; font-weight: 700; color: var(--text-headline); }
.palaceBranch { font-size: 0.8rem; color: var(--text-muted); background: rgba(255,255,255,0.05); padding: 2px 8px; border-radius: 4px; }
.palaceStars { display: flex; flex-direction: column; gap: var(--space-1); margin-bottom: var(--space-2); }
.majorStars { font-size: 0.85rem; color: var(--accent-primary); font-weight: 500; }
.minorStars { font-size: 0.8rem; color: var(--text-body); }
.siHua { font-size: 0.8rem; color: #fbbf24; font-weight: 500; }
.palaceInterp { font-size: 0.84rem; color: var(--text-body); line-height: 1.8; }

/* === HUMAN DESIGN specific === */
.centersGrid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: var(--space-3); }
.centerItem { padding: var(--space-4); border-radius: var(--radius-md); border: 1px solid var(--border); }
.centerDefined { background: rgba(127, 90, 240, 0.06); border-color: rgba(127, 90, 240, 0.15); }
.centerOpen { background: rgba(255,255,255,0.02); }
.centerName { font-size: 0.88rem; font-weight: 600; color: var(--text-headline); display: block; }
.centerStatus { font-size: 0.75rem; color: var(--text-muted); display: block; margin-bottom: var(--space-2); }
.centerInterp { font-size: 0.8rem; color: var(--text-body); line-height: 1.6; }

.channelRow { padding: var(--space-4); background: rgba(255,255,255,0.02); border-radius: var(--radius-md); margin-bottom: var(--space-2); }
.channelHeader { display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-2); }
.channelGates { font-size: 0.88rem; font-weight: 700; color: var(--accent-primary); font-family: 'Space Grotesk', monospace; }
.channelName { font-size: 0.88rem; font-weight: 500; color: var(--text-headline); flex: 1; }
.channelType { font-size: 0.75rem; color: var(--text-muted); background: rgba(255,255,255,0.05); padding: 2px 8px; border-radius: 4px; }
.channelInterp { font-size: 0.82rem; color: var(--text-body); line-height: 1.7; }

/* Bottom */
.disclaimer { font-size: 0.75rem; color: var(--text-muted); text-align: center; padding: var(--space-6) 0; }
.backAction { display: flex; justify-content: center; padding: var(--space-4) 0 var(--space-12); }

/* Loading / Error */
.loading { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: var(--space-4); color: var(--text-body); }
.loadingOrb { width: 28px; height: 28px; border-radius: 50%; background: var(--accent-primary); animation: pulse-soft 2s ease-in-out infinite; opacity: 0.6; }
.errorState { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: var(--space-4); text-align: center; padding: var(--space-8); }
.errorState h2 { font-size: 1.25rem; }
.errorMsg { color: var(--text-body); font-size: 0.9rem; margin-bottom: var(--space-4); }

@media (max-width: 640px) {
  .main { padding: 0 var(--space-3) var(--space-12); }
  .card { padding: var(--space-5) var(--space-4); border-radius: var(--radius-lg); }
  .pillarsGrid { grid-template-columns: repeat(4, 1fr); gap: var(--space-2); }
  .pillarStemBranch { font-size: 1.1rem; }
  .centersGrid { grid-template-columns: 1fr; }
  .elementsRow { flex-wrap: wrap; }
}
